
<!doctype html><html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>LunchSpot â€“ ì ì‹¬ ë§›ì§‘ ì•„ì¹´ì´ë¸Œ</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;margin:0;background:#f7f7f8}
.wrap{max-width:1100px;margin:24px auto;padding:0 16px}
header{display:flex;gap:12px;flex-wrap:wrap;align-items:flex-end;justify-content:space-between;margin-bottom:12px}
h1{font-size:20px;margin:0}.controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
input[type='text'],select{padding:8px 10px;border-radius:10px;border:1px solid #ddd;background:#fff}
input[type='range']{width:220px}.pill{padding:6px 10px;border:1px solid #ddd;border-radius:999px;background:#fff;font-size:12px;cursor:pointer}
.pill.on{background:#111;color:#fff}.grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
@media (max-width:800px){.grid{grid-template-columns:1fr}}.card{background:#fff;border:1px solid #e7e7ea;border-radius:16px;padding:14px}
.muted{color:#666;font-size:12px}.row{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}
.tag{background:#f0f0f3;color:#444;padding:2px 6px;border-radius:999px;font-size:10px;margin-right:4px;display:inline-block}
.seg{display:inline-flex;border:1px solid #ddd;border-radius:12px;overflow:hidden;background:#fff}
.seg button{padding:6px 10px;border:0;background:transparent;cursor:pointer}.seg button.on{background:#111;color:#fff}
footer{text-align:center;margin:18px 0 8px;color:#777;font-size:12px}
.alert{background:#fff3cd;border:1px solid #ffeeba;color:#856404;padding:10px;border-radius:10px;margin:8px 0;font-size:12px}
.kv{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-left:8px}
</style></head><body>
<div class="wrap">
<header><div><h1>ğŸ± LunchSpot â€“ ì ì‹¬ ë§›ì§‘ ì•„ì¹´ì´ë¸Œ</h1><div class="muted">ì´ íŒŒì¼ í•˜ë‚˜ë¡œ ë™ì‘í•©ë‹ˆë‹¤. (ì†Œìš”ì‹œê°„ ê¸°ì¤€ í•„í„°)</div></div>
<div class="controls"><div class="seg"><button id="tab-rest" class="on">ì‹ë‹¹</button><button id="tab-cafe">ì¹´í˜</button></div>
<select id="sort"><option value="score">ì •ë ¬: ì ìˆ˜</option><option value="time">ì •ë ¬: ì†Œìš”ì‹œê°„</option><option value="wait">ì •ë ¬: ëŒ€ê¸°</option><option value="price">ì •ë ¬: ê°€ê²©</option></select>
<input id="q" type="text" placeholder="ê²€ìƒ‰: ì´ë¦„/ìŒì‹/íƒœê·¸"></div></header>
<section class="controls" style="margin-bottom:12px;">
  <div class="kv">ìµœëŒ€ ë„ë³´ì‹œê°„: <span id="tOut">15</span>ë¶„ <input id="t" type="range" min="3" max="30" step="1" value="15"></div>
  <div class="kv">ìµœëŒ€ ê°€ê²©: â‚©<span id="pOut">15000</span> <input id="p" type="range" min="4000" max="20000" step="500" value="15000"></div>
  <div class="kv">ìµœëŒ€ ëŒ€ê¸°: <span id="wOut">20</span>ë¶„ <input id="w" type="range" min="0" max="40" step="1" value="20"></div>
  <label class="kv" style="margin-left:0;"><input id="hideUnknownTime" type="checkbox"> ì†Œìš”ì‹œê°„ ì •ë³´ ì—†ëŠ” ê°€ê²Œ ìˆ¨ê¸°ê¸°</label>
</section>
<div class="muted" id="count"></div>
<div id="hint" class="alert" style="display:none;">ê°€ê²Œê°€ ì•ˆ ë³´ì´ë©´: (1) ê²€ìƒ‰ì„ ë¹„ìš°ê³  (2) ì†Œìš”ì‹œê°„ì„ ë„“íˆê³  (3) ì²´í¬ë°•ìŠ¤ í•´ì œí•´ë³´ì„¸ìš”.</div>
<div class="grid" id="grid"></div>
<footer>ì ìˆ˜ = 0.35Â·ë§› + 0.25Â·ì†ë„ + 0.2Â·ê°€ì„±ë¹„ + 0.1Â·ê±´ê°• + 0.1Â·ì¾Œì  (1â€“5)</footer>

<script>
const RESTAURANTS = [{"id": "area-spot-001", "name": "ìŒëŒ€í¬ë§·ëŒìˆœë‘ë¶€", "cuisine": "ìˆœë‘ë¶€ì°Œê°œ", "tags": ["í•œì‹", "ì •ê°ˆ", "ëœ¨ëˆ"], "address": "https://naver.me/GSDA3Rf2", "area": "ë°±ìƒë¹Œë”©", "latitude": null, "longitude": null, "distance_km": null, "walking_time_min": 5, "lunch_peak_wait_min": null, "avg_wait_min": null, "price_min_krw": null, "price_max_krw": null, "signature_dish": "ë§·ëŒ ìˆœë‘ë¶€", "website": null, "phone": null, "open_hours": null, "notes": "ëœ¨ëˆí•œ ìˆœë‘ë¶€. ì›¨ì´íŒ… ìˆìŒ", "speed_rating_1_5": 4, "taste_rating_1_5": 5, "value_rating_1_5": 4, "health_rating_1_5": 4, "comfort_rating_1_5": 5, "lunch_score": 5.0}, {"id": "area-2-002", "name": "ë³„ë¯¸ë³¶ìŒì (2í˜¸ì ë„ ìˆìŒ)", "cuisine": "ì§í™”ë³¶ìŒ", "tags": ["í•œì‹", "ë“ ë“ ", "ë§¤ì½¤"], "address": "https://naver.me/GXApctda", "area": "ì—¬ì˜ë„ë°±í™”ì , ë°±ìƒë¹Œë”©", "latitude": null, "longitude": null, "distance_km": null, "walking_time_min": 5, "lunch_peak_wait_min": null, "avg_wait_min": null, "price_min_krw": null, "price_max_krw": null, "signature_dish": "ì˜¤ì‚¼ì§í™”", "website": null, "phone": null, "open_hours": null, "notes": "ë°¥ ì¶”ê°€ê°€ëŠ¥, ê³„ë€ì°œ ì¶”ì²œ", "speed_rating_1_5": 4, "taste_rating_1_5": 5, "value_rating_1_5": 4, "health_rating_1_5": 3, "comfort_rating_1_5": 4, "lunch_score": 5.0}, {"id": "area-spot-003", "name": "ì¥ìˆ˜í•œë°© ì‚¼ê³„íƒ•", "cuisine": "í•œë°©ì‚¼ê³„íƒ•", "tags": ["í•œì‹", "í•œë°©", "ëœ¨ëˆ"], "address": "https://naver.me/5oEcSlQp", "area": "ì—¬ì˜ë„ë°±í™”ì ", "latitude": null, "longitude": null, "distance_km": null, "walking_time_min": 5, "lunch_peak_wait_min": null, "avg_wait_min": null, "price_min_krw": null, "price_max_krw": null, "signature_dish": "í•œë°©ì‚¼ê³„íƒ•", "website": null, "phone": null, "open_hours": null, "notes": "ë°˜ê³„íƒ• ì˜µì…˜ ìˆìŒ", "speed_rating_1_5": 4, "taste_rating_1_5": 5, "value_rating_1_5": 3, "health_rating_1_5": 5, "comfort_rating_1_5": 5, "lunch_score": 4.5}, {"id": "area-spot-004", "name": "í•œë¯¸ì˜¥", "cuisine": "ì†¥ë°¥ì •ì‹", "tags": ["í•œì‹", "ê³ ê¸‰", "ê³ ê¸°"], "address": "https://naver.me/GL8ir48g", "area": "ë°”ë¡œ ì˜†", "latitude": null, "longitude": null, "distance_km": null, "walking_time_min": 1, "lunch_peak_wait_min": null, "avg_wait_min": null, "price_min_krw": null, "price_max_krw": null, "signature_dish": "ë¬´ ì†¥ë°¥ì •ì‹", "website": null, "phone": null, "open_hours": null, "notes": "ì§ì ‘ êµ¬ì›Œì£¼ì‹¬, ì°Œê°œë„ ë‚˜ì˜´", "speed_rating_1_5": 3, "taste_rating_1_5": 5, "value_rating_1_5": 3, "health_rating_1_5": 4, "comfort_rating_1_5": 5, "lunch_score": 4.0}, {"id": "area-spot-005", "name": "í›„ë¼í† ì‹ë‹¹ ì—¬ì˜ë„ì§ì˜ì ", "cuisine": "ê·œì¹´ì¸ , ì˜¤ë¯€ë¼ì´ìŠ¤", "tags": ["ì¼ì‹", "ë©”ë‰´ë§ìŒ", "í˜¼ë°¥ê°€ëŠ¥"], "address": "https://naver.me/GQ1lirNo", "area": "íŒŒì´ë‚¸ìŠ¤íƒ€ì›Œ", "latitude": null, "longitude": null, "distance_km": null, "walking_time_min": 5, "lunch_peak_wait_min": null, "avg_wait_min": null, "price_min_krw": null, "price_max_krw": null, "signature_dish": "ê·œì¹´ì¸ ", "website": null, "phone": null, "open_hours": null, "notes": "ë¹„ì‹¸ì§€ë§Œ ë§›ìˆìŒ", "speed_rating_1_5": 3, "taste_rating_1_5": 5, "value_rating_1_5": 2, "health_rating_1_5": 3, "comfort_rating_1_5": 4, "lunch_score": 4.0}, {"id": "im-spot-006", "name": "ì•¼ë§ˆì•¼", "cuisine": "ì¼ë³¸ê°€ì •ì‹", "tags": ["ì¼ì‹", "ì¢…ë¥˜ë§ìŒ"], "address": "https://naver.me/Fw7iBwyq", "area": "iMì¦ê¶Œë¹Œë”©", "latitude": null, "longitude": null, "distance_km": null, "walking_time_min": 5, "lunch_peak_wait_min": null, "avg_wait_min": 5, "price_min_krw": null, "price_max_krw": null, "signature_dish": "íŠ¹ì„  ëŸ°ì¹˜ ì •ì‹", "website": null, "phone": null, "open_hours": null, "notes": "ë°˜ì°¬ì— ëª…ë€ì “ì´ ìˆìŒ", "speed_rating_1_5": 4, "taste_rating_1_5": 5, "value_rating_1_5": 3, "health_rating_1_5": 3, "comfort_rating_1_5": 3, "lunch_score": 4.0}, {"id": "area-spot-007", "name": "ë‹ˆì¦ˆë²„ê±°", "cuisine": "í–„ë²„ê±°", "tags": ["ì–‘ì‹", "ìˆ˜ì œë²„ê±°", "í˜¼ë°¥ê°€ëŠ¥"], "address": "https://naver.me/xExWUd8Y", "area": "êµë³´ì¦ê¶Œë¹Œë”©", "latitude": null, "longitude": null, "distance_km": null, "walking_time_min": 5, "lunch_peak_wait_min": null, "avg_wait_min": null, "price_min_krw": null, "price_max_krw": null, "signature_dish": "ë‹ˆì¦ˆë²„ê±° ì„¸íŠ¸", "website": null, "phone": null, "open_hours": null, "notes": null, "speed_rating_1_5": 3, "taste_rating_1_5": 5, "value_rating_1_5": 4, "health_rating_1_5": 2, "comfort_rating_1_5": 4, "lunch_score": 4.0}, {"id": "area-spot-008", "name": "ì€í¬ë„¤ í•´ì¥êµ­", "cuisine": "í•´ì¥êµ­", "tags": ["í•œì‹", "ì–¼í°", "ëœ¨ëˆ"], "address": "https://naver.me/5T4AupdN", "area": "í¬ìŠ¤íŠ¸íƒ€ì›Œ", "latitude": null, "longitude": null, "distance_km": null, "walking_time_min": 5, "lunch_peak_wait_min": null, "avg_wait_min": null, "price_min_krw": null, "price_max_krw": null, "signature_dish": "í•´ì¥êµ­", "website": null, "phone": null, "open_hours": null, "notes": "ì§„ì§œ ë¹¨ë¦¬ë‚˜ì˜´. ë§µê¸° ì§ì ‘ ì¡°ì ˆ. ë‹¤ì§„ ë§ˆëŠ˜ ë„£ê¸°", "speed_rating_1_5": 5, "taste_rating_1_5": 5, "value_rating_1_5": 4, "health_rating_1_5": 3, "comfort_rating_1_5": 4, "lunch_score": 4.5}, {"id": "area-spot-009", "name": "êµì§ì›ê³µì œíšŒ êµ¬ë‚´ì‹ë‹¹", "cuisine": "êµ¬ë‚´ì‹ë‹¹", "tags": ["í•œì‹", "ì‹ë‹¨í‘œ", "ê°€ì„±ë¹„"], "address": null, "area": "í•œêµ­êµì§ì›ê³µì œíšŒ", "latitude": null, "longitude": null, "distance_km": null, "walking_time_min": 5, "lunch_peak_wait_min": null, "avg_wait_min": null, "price_min_krw": null, "price_max_krw": null, "signature_dish": "ì‹ê¶Œêµ¬ë§¤", "website": null, "phone": null, "open_hours": null, "notes": "ìƒŒë”” ì•±ì—ì„œ ì‹ë‹¨í‘œ í™•ì¸ê°€ëŠ¥. ë°˜ì°¬ ë° ìƒëŸ¬ë“œ ì…€í”„ë°”. ë°¥ ì¶”ê°€ ê°€ëŠ¥", "speed_rating_1_5": 5, "taste_rating_1_5": 4, "value_rating_1_5": 5, "health_rating_1_5": 5, "comfort_rating_1_5": 4, "lunch_score": 5.0}];
const CAFES = [];

function normTags(v){ if(!v) return []; return Array.isArray(v)?v:String(v).split(',').map(s=>s.trim()).filter(Boolean); }
function isFiniteNumber(n){ return typeof n==='number' && isFinite(n); }
function computeWalk(r){ 
  if(isFiniteNumber(r.walking_time_min)) return r.walking_time_min; 
  if(isFiniteNumber(r.distance_km)) return Math.round(r.distance_km*1000/80);
  return undefined;
}
function clamp01(n){ return Math.max(0, Math.min(1, n)); }
function score5(r){ 
  const t=clamp01((r.taste_rating_1_5||0)/5), s=clamp01((r.speed_rating_1_5||0)/5), v=clamp01((r.value_rating_1_5||0)/5), h=clamp01((r.health_rating_1_5||0)/5), c=clamp01((r.comfort_rating_1_5||0)/5); 
  return +((0.35*t+0.25*s+0.2*v+0.1*h+0.1*c)*5).toFixed(2); 
}
function normalize(list){ 
  return list.map(r=>({ 
    ...r, 
    tags: normTags(r.tags),
    walking_time_min: computeWalk(r),
    lunch_score: isFiniteNumber(r.lunch_score) ? r.lunch_score : score5(r)
  })); 
}
function won(n){ return (typeof n==='number' && isFinite(n)) ? n.toLocaleString('ko-KR') : 'â€”'; }

let dataset='restaurants';
const $=sel=>document.querySelector(sel);
const q=$('#q'), sort=$('#sort'), t=$('#t'), p=$('#p'), w=$('#w'), tOut=$('#tOut'), pOut=$('#pOut'), wOut=$('#wOut'), grid=$('#grid'), count=$('#count'), tabRest=$('#tab-rest'), tabCafe=$('#tab-cafe'), hideUnknown=$('#hideUnknownTime'), hint=$('#hint');

function dataNow(){ return normalize(dataset==='cafes'?CA'+'FES:RESTAURANTS); }

function render(){
  try {
    tOut.textContent=t.value; pOut.textContent=p.value; wOut.textContent=w.value;
    const data=dataNow().filter(r=>{
      const wt = computeWalk(r);
      const passTime = (isFiniteNumber(wt) ? (wt <= +t.value) : !hideUnknown.checked);
      const passPrice = (isFiniteNumber(r.price_min_krw)?r.price_min_krw:0) <= +p.value;
      const passWait = (isFiniteNumber(r.lunch_peak_wait_min)?r.lunch_peak_wait_min:0) <= +w.value;
      const ql=q.value.trim().toLowerCase();
      const hay=[r.name,r.cuisine,r.area,r.signature_dish,r.address,(r.tags||[]).join(' ')].join(' ').toLowerCase();
      const passSearch = ql ? hay.includes(ql) : true;
      return passTime && passPrice && passWait && passSearch;
    }).sort((a,b)=> 
      sort.value==='score' ? (a.lunch_score||0)<(b.lunch_score||0)?1:-1 :
      sort.value==='time'  ? ((computeWalk(a)??999)-(computeWalk(b)??999)) :
      sort.value==='wait'  ? ((isFiniteNumber(a.lunch_peak_wait_min)?a.lunch_peak_wait_min:0)-(isFiniteNumber(b.lunch_peak_wait_min)?b.lunch_peak_wait_min:0)) :
                             ((isFiniteNumber(a.price_min_krw)?a.price_min_krw:0)-(isFiniteNumber(b.price_min_krw)?b.price_min_krw:0))
    );
    count.textContent=`${data.length} ê³³`;
    hint.style.display = data.length ? 'none' : 'block';
    grid.innerHTML=data.map(r=>`<div class="card">
      <div style="display:flex;justify-content:space-between;gap:8px;">
        <div>
          <div style="font-weight:700;">${r.name??'â€”'}</div>
          <div class="muted">${r.cuisine??'â€”'} Â· ${r.area??''}</div>
        </div>
        <div style="text-align:right;">
          <div style="font-size:18px;font-weight:700;">${isFiniteNumber(r.lunch_score)?r.lunch_score.toFixed(1):'â€”'}</div>
          <div class="muted">lunch score</div>
        </div>
      </div>
      <div class="row">
        <div>ğŸ’¸ ê°€ê²©: â‚©${won(r.price_min_krw)}â€“â‚©${won(r.price_max_krw)}</div>
        <div>ğŸš¶ ì†Œìš”ì‹œê°„: ${computeWalk(r)??'â€”'}ë¶„ ${isFiniteNumber(r.distance_km)?`(<span class="muted">${r.distance_km} km</span>)`:''}</div>
        <div>â±ï¸ ëŒ€ê¸°(í”¼í¬): ${isFiniteNumber(r.lunch_peak_wait_min)?r.lunch_peak_wait_min:'â€”'}ë¶„</div>
        <div>ğŸ¥— ì‹œê·¸ë‹ˆì²˜: ${r.signature_dish??'â€”'}</div>
      </div>
      <div style="margin-top:6px;">${(r.tags||[]).map(t=>`<span class="tag">${t}</span>`).join(' ')}</div>
      <div style="margin-top:8px;display:flex;gap:6px;flex-wrap:wrap;">
        ${(r.latitude&&r.longitude)?`<a class="pill" href="https://www.google.com/maps/search/?api=1&query=${r.latitude},${r.longitude}" target="_blank">Google Maps</a>`:''}
        <a class="pill" href="https://map.naver.com/v5/search/${encodeURIComponent(r.name||'')} " target="_blank">Naver Map</a>
        ${r.website?`<a class="pill" href="${r.website}" target="_blank">Website</a>`:''}
      </div>
    </div>`).join('');
  } catch(e) {
    console.error(e);
    document.getElementById('grid').innerHTML = `<div class="alert">ë Œë”ë§ ì˜¤ë¥˜: ${String(e)}</div>`;
  }
}

[q,sort,t,p,w,hideUnknown].forEach(el=> el.addEventListener('input', render));
const tabRest = document.getElementById('tab-rest');
const tabCafe = document.getElementById('tab-cafe');
tabRest.addEventListener('click',()=>{dataset='restaurants';tabRest.classList.add('on');tabCafe.classList.remove('on');render();});
tabCafe.addEventListener('click',()=>{dataset='cafes';tabCafe.classList.add('on');tabRest.classList.remove('on');render();});

render();
</script>
</div></body></html>
